<extend name="./apps/Common/Template/temp.html" />
<block name="css">
<style type="text/css">
#single_b span{
	background-color:#f60;
	width:30px;
}
</style>
</block>
<block name="body">
    <div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header" title="<php>echo getFunctionInfo(ACTION_NAME.session('cat'));</php>"> <php>echo getFunctionInfo(ACTION_NAME);</php></div>
                <form id="form_sample_2" action="{:U('edu_questions_save')}" method="post" class="form-horizontal">
                    <div class="layui-card-body layui-form">
                        <input type="hidden" class="form-control" name="questions_id" value="{$questions.questions_id}">
                        <input type="hidden" class="form-control" name="material_id" value="{$material_id}">
                        <div class="layui-row">
                            <div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-14 fcolor-65 lh-35"><strong>问题题目：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35"> <input type="text" name="questions_title" value="{$questions.questions_title}" autocomplete="off" class="layui-input" lay-verify='required'></div>
                                    <span class="fcolor-red fsize-18 lh-35 pl-5">*</span>
                                </div>
                            </div>
                            <div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-214 fcolor-65 lh-35"><strong>考题类型：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35">
                                        <input type="hidden" class="form-control" name="type"  id="type" value="{$questions['questions_type']}">
                                        <select name="questions_type"  id="questions_type" lay-filter="state" lay-search="" lay-verify='required'>
                                               <php>echo getBdTypeSelect('topic_type','',$questions['questions_type']);</php>
                                            
                                        </select>
                                    </div>
                                </div>
                            </div>
							<div id="a_list">
								<div id="a">
								{$que_list_a}
								</div>
								
								<div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-14 fcolor-65 lh-35"><strong>正确答案：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35"> 
                                    <div id="single_a">
                                    {$option_list_a}
                                    </div>
                                    </div>
                                    <span class="fcolor-red fsize-18 lh-35 pl-5">*</span>
                                </div>
                            	</div>
							</div>
							<div id="b_list">
								<div id="b">
									{$que_list_b}
								</div>
								<div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-14 fcolor-65 lh-35"><strong>正确答案：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35"> 
                                    <div id="single_b">
                                    {$option_list_b}
                                    </div>
                                    </div>
                                    <span class="fcolor-red fsize-18 lh-35 pl-5">*</span>
                                </div>
                            	</div>
                            </div>
                            <div id="c_list">
								<div id="c">
									{$que_list_c}
								</div>
								<div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-14 fcolor-65 lh-35"><strong>正确答案：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35"> 
                                    <div id="single_c">
                                    {$option_list_c}
                                    </div>
                                    </div>
                                    <span class="fcolor-red fsize-18 lh-35 pl-5">*</span>
                                </div>
                            	</div>
                            </div>
                            <div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-14 fcolor-65 lh-35"><strong>答案解析：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35">
                                        <textarea name="memo" placeholder="请输入答案解析" class="layui-textarea">{$questions_data.memo}</textarea>
                                    </div>
                                </div>
                            </div>
                             <div class="layui-col-xs12 mt-10">
                                <div class="layui-row">
                                    <div class="layui-col-xs2 text-r fsize-14 fcolor-65 lh-35"><strong>分值：</strong></div>
                                    <div class="layui-col-xs8 fsize-14 fcolor-65 lh-35"> 
                                    <input type="text" name="questions_score" value="{$questions.questions_score}" autocomplete="off" class="layui-input" lay-verify='required|number' maxlength="2" onkeyup="value=value.replace(/[^\d.]/g,'')" ></div>
                                    <span class="fcolor-red fsize-18 lh-35 pl-5">*</span>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <div class="layui-footer" style="text-align: right">
                                        <button type="submit"  class="layui-btn"  lay-submit=""  lay-filter="component-form-demo1">提交</button>
                                         <button type="reset" class="layui-btn layui-btn-primary mr-40" onclick="layer_colse();">返回</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    </div>
</div>
</block>
<block name="js">
    <script>
        function layer_colse() {
            var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
            parent.layer.close(index);
        }
        layui.use([ 'form', 'laydate'], function() {
            var $ = layui.jquery
                    , admin = layui.admin
                    , element = layui.element
                    , layer = layui.layer
                    , laydate = layui.laydate
                    , form = layui.form;
            form.render(null, 'component-form-group');
            form.on('select(state)', function(data){
            	var type = data.value;
            	$("#type").val(type);
            	if(type == 1){ 
        		 	$("#a_list").show();
        	     	$("#b_list").hide(); 
        	     	$("#c_list").hide(); 
        		}else if(type == 2){
        			$("#a_list").hide();
        	     	$("#b_list").show(); 
        	     	$("#c_list").hide();
        		}else if(type == 3){
        			$("#a_list").hide();
        	     	$("#b_list").hide(); 
        	     	$("#c_list").show();
        		} 
            });
            laydate.render({
                elem: '#LAY-component-form-group-date'
            });
        })
        //时间选择器
        layui.use('laydate', function() {
            var laydate = layui.laydate;
            //时间选择器
            //时间选择器
            laydate.render({
                elem: '#test4'
                ,type: 'time'
            });
            //日期时间范围
            laydate.render({
                elem: '#test10_add'
                ,type: 'datetime'
                ,range: true
            });
        })
    </script>
    
    <script>
	$(document).ready(function(){
		var type = $("#type").val();
		if(type == 1){ 
		 	$("#a_list").show();
	     	$("#b_list").hide(); 
	     	$("#c_list").hide(); 
		}else if(type == 2){
			$("#a_list").hide();
	     	$("#b_list").show(); 
	     	$("#c_list").hide();
		}else if(type == 3){
			$("#a_list").hide();
	     	$("#b_list").hide(); 
	     	$("#c_list").show();
		} 
	});
	function buttonfun(){
		var type = $("#type").val();
		if(type == 1){
			var type_n = 'a';
		}else if(type ==2){
			var type_n = 'b';
		}else if(type ==3){
			var type_n = 'c';
		}
		var num = $("#num_no_"+type_n).val();
		var num_no = Number(num)+1;
		$("#num_no_"+type_n).val(num_no);
		var nu = '';
		switch(num_no){
	 		case 3:nu = "C";break;
	 		case 4:nu = "D";break;
	 		case 5:nu = "E";break;
	 		case 6:nu = "F";break;
	 		case 7:nu = "G";break;
	 		case 8:nu = "H";break;
	 		case 9:nu = "I";break;
	 		case 10:nu = "J";break;
	 		case 11:nu = "K";break;
	 		case 12:nu = "L";break;
	 		case 13:nu = "M";break;
	 		case 14:nu = "N";break;
	 		case 15:nu = "O";break;
		}
		if(num_no > 15){
			layer.msg('选项过多！！');
			return ;
		}
		var a = "<div class='layui-col-xs12 mt-10' id="+type_n+"_"+num_no+"><div class='layui-row'><div class='layui-col-xs2 text-r fsize-14 fcolor-65 lh-35'><strong>"+nu+"：</strong></div>";
		var b = " <div class='layui-col-xs8 fsize-14 fcolor-65 lh-35'><input type='text' name='questions_item_"+type_n+"_"+num_no+"' value='' autocomplete='off' class='layui-input'>";
		var c = "</div></div></div>";
		var zong = a+b+c;
		$("#"+type_n).append(zong);
		
		if(type == 1){
			var selvol = "<div class='layui-col-xs2 fsize-14 fcolor-65 lh-35' id='a_q_"+num_no+"'> <input type='radio' name='questions_answer_a' value="+nu+" title="+nu+"> </div>";
		}else if(type ==2){
			var selvol = "<div class='layui-col-xs2 fsize-14 fcolor-65 lh-35' id='b_q_"+num_no+"'> <input type='checkbox' name='questions_answer_b[]' title='"+nu+"' value='"+nu+"'></div>";
		}else if(type ==3){
			var type_n = 'c';
		}
		
		$("#single_"+type_n).append(selvol);
		layui.form.render();
	}
	function buttondel(){
		
		var type = $("#type").val();
		
		if(type == 1){
			var type_n = 'a';
		}else if(type ==2){
			var type_n = 'b';
		}else if(type ==3){
			var type_n = 'c';
		}
		var num = $("#num_no_"+type_n).val();
	
		 if(num >2){
			$("#"+type_n+"_"+num).remove();      //移除最后一行,并且保留前两行
			$("#"+type_n+"_q_"+num).remove();      //移除最后一行,并且保留前两行
			var num = Number(num)-1;
			$("#num_no_"+type_n).val(num);	
			layui.form.render();
		}else{
			layer.msg('无可删除项！！');
			return ;
		} 
	}
</script>
</block>