<extend name="./apps/Common/Template/temp.html" /><block name="css"></block><block name="body"><div class="layui-fluid " >    <div class="layui-row layui-col-space10">        <div class="layui-col-md3">            <div class="layui-card">                <form class="layui-form">                    <div class="layui-card-header">                        <span title="管理类型">论坛栏目</span>                        <a href="{:U('lifebbs/life_bbs_post_cat_index')}" title="论坛栏目添加" style="text-decoration: none" class="pull-right"><i class="layui-icon" style="color: #f60;position: relative;top: 0px;left: 70%;font-size: 20px;"></i></a>                    </div>                    <div class="layui-card-body">                        <div class="over-h-tree">                            <ul id="treeDemo" class="ztree ztree-demo">                            </ul>                        </div>                    </div>                </form>            </div>        </div>        <div class="layui-col-md9">            <div class="layui-row">                <div class="layui-col-xs12">                    <div class="layui-card">                        <div class="layui-card-header" title="<php>echo getFunctionInfo(ACTION_NAME);</php>"><php>echo getFunctionInfo(ACTION_NAME);</php></div>                        <div class="layui-form layui-card-body fitheight">                            <div class="layui-row layui-col-space5">                                                                <div class="layui-col-xs3 pull-right">                                    <!-- <a class="layui-btn" data-type="reload" lay-filter="searchFilter" style="text-decoration: none;" title="查询">搜索</a> -->                                    <!-- <a class="layui-btn table-add " href="{:U('life_affairs_edit')}" style="text-decoration: none;" title="添加">添加</a> -->                                </div>                            </div>                            <table class="layui-table" id="demo"  lay-filter="demo">                            </table>                            <script type="text/html" id="operate">                                                            </script>                        </div>                    </div>                </div>            </div>        </div>    </div></div></block><block name="js">	<script>        layui.use(['element','form'], function() {            var $ = layui.$                    , admin = layui.admin                    , element = layui.element                    , form = layui.form                    , router = layui.router();            form.render();            // 默认显示的 表格            layui.use('table', function () {                var table = layui.table;                table.render({                    elem: '#demo'                    , url: '{:U("life_bbs_post_index_data",array("status"=>$status,"cat_id"=>$cat_id))}'                    , height: 'full-160'                    , id: 'ztreedata'                    , cols: [[                        {field: 'post_id', width: 80, title: '编号', sort: true}                        , {field: 'communist_name', width:120 , title: '用户名'}                        , {field: 'post_theme' , title: '对应主题'}                        , {field: 'add_time', width: 130, title: '发布时间'}                        , {field: 'bbs_status', width: 90, title: '状态'}                        , {field: 'operate', width:160 , title: '操作'}                    ]]                    , page: true                });            });            //点击左侧树的事件            var setting = {                view: {                    showLine: false,                },                data: {                    key: {                        title: "t"                    },                    simpleData: {                        enable: true                    }                },                callback: {                    onClick: function (a, b, node) {     //node是代表zNodes里面的urltree属性                        layui.use('table', function () {                            var table = layui.table;                            table.render({                                elem: '#demo'                                , url: '{:U("life_bbs_post_index_data")}?cat_id='+node.id+''                                , height: 'full-160'                                , cols: [[                                    {field: 'post_id', width: 80, title: '编号', sort: true}                                    , {field: 'communist_name', width:120 , title: '用户名'}                                    , {field: 'post_theme' , title: '对应主题'}                                    , {field: 'add_time', width: 130, title: '发布时间'}                                    , {field: 'bbs_status', width: 90, title: '状态'}                                    , {field: 'operate', width:160 , title: '操作'}                                ]]                                , page: true                            });                        });                    }                }            };            var zNodes = [                <volist name="cat_list" id="list" key = 'k'>                    {id:"{$list.cat_id}", name:"{$list.cat_name}", pId:"{$list.cat_pid}" , t:"{$list.cat_name}",icon:"__STATICS__/layuiadmin/style/res/wenjianjia-2.png", <if condition='$k eq 1'>open:true</if>},                </volist>            ];            $(document).ready(function () {                $.fn.zTree.init($("#treeDemo"), setting, zNodes);            });        })    </script>    <script>        //时间选择器        layui.use('laydate', function() {            var laydate = layui.laydate;            //常规用法            laydate.render({                elem: '#time',                range: true            });        })        // 设置ztree 列表和右侧列表一样高度        $(".over-h-tree").css("height",($(window).height() - 135));    </script>		 	</block>